{
	"created_at": "2023-04-16T11:17:28Z",
	"updated_at": "2023-04-16T11:17:28Z",
	"body": "~~## ZLD 的配置~~\r\n\r\n~~Rust 编译大部分耗时在 [linker 阶段](https://en.wikipedia.org/wiki/Linker_(computing)), 所以文中给与 ZLD 配置, 但是注意后面的配置路径有点问题, homebrew Apple silicon 默认的安装位置在`/opt/homebrew/bin/`~~\r\n\r\n```diff\r\n# .cargo/config.toml\r\n# On Windows\r\n# ```\r\n# cargo install -f cargo-binutils\r\n# rustup component add llvm-tools-preview\r\n# ```\r\n[target.x86_64-pc-windows-msvc]\r\nrustflags = [\"-C\", \"link-arg=-fuse-ld=lld\"]\r\n[target.x86_64-pc-windows-gnu]\r\nrustflags = [\"-C\", \"link-arg=-fuse-ld=lld\"]\r\n# On Linux:\r\n# - Ubuntu, `sudo apt-get install lld clang`\r\n# - Arch, `sudo pacman -S lld clang`\r\n[target.x86_64-unknown-linux-gnu]\r\nrustflags = [\"-C\", \"linker=clang\", \"-C\", \"link-arg=-fuse-ld=lld\"]\r\n# On MacOS, `brew install michaeleisel/zld/zld`\r\n[target.x86_64-apple-darwin]\r\nrustflags = [\"-C\", \"link-arg=-fuse-ld=/usr/local/bin/zld\"]\r\n[target.aarch64-apple-darwin]\r\n- rustflags = [\"-C\", \"link-arg=-fuse-ld=/usr/local/bin/zld\"]\r\n+ rustflags = [\"-C\", \"link-arg=-fuse-ld=/opt/homebrew/bin/zld\"]\r\n```\r\n提到了新出来的 [mold](https://github.com/rui314/mold) 会更加好一点, 有机会再试试\r\n\r\n---\r\n\r\nupdate:\r\n* zld 不再维护的了, 使用 lld 替代[^1], 但是和 reddit 上有用户评论一样, 速度并没有提示很高[^2]\r\n* mold 的 MacOS 版本 sold 是商业版需要购买 licence , 放弃\r\n\r\n总结: 不要花时间在 linker 上\r\n\r\n\r\n\r\n[^1]: https://eisel.me/lld\r\n[^2]: https://www.reddit.com/r/rust/comments/11h28k3/faster_apple_builds_with_the_lld_linker/"
}
